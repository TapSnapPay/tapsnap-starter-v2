<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Checkout</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; margin: 2rem; }
    .card { max-width: 520px; border: 1px solid #ddd; padding: 16px; border-radius: 12px; }
    label { display:block; margin-top: 12px; font-weight: 600; }
    input { width: 100%; padding: 8px; }
    button { margin-top: 16px; width: 100%; padding: 10px; }
  </style>
</head>
<body>
  <h1>Checkout</h1>
{% if error %}
  <div style="background:#ffecec;border:1px solid #ffb3b3;color:#a40000;padding:10px;border-radius:6px;margin:10px 0;">
    {{ error }}
  </div>
{% endif %}

  <div class="card">
    <!-- When you type in Amount (dollars), we keep amount_cents updated automatically -->
    <form method="post" action="/checkout" oninput="
      const a = parseFloat(amount_dollars.value || '0');
      amount_cents.value = Number.isFinite(a) ? Math.round(a * 100) : 0;
    ">
      <label for="merchant_id">Merchant ID</label>
      <input id="merchant_id" name="merchant_id" type="number" min="1"
             value="{{ merchant_id }}" required readonly />

      <label for="amount_dollars">Amount (USD $)</label>
      <input id="amount_dollars" type="number" step="0.01" min="0.01"
             value="{{ display_amount }}" required />

      <!-- Hidden field the server expects -->
      <input id="amount_cents" name="amount_cents" type="hidden"
             value="{{ amount_cents }}" />

      <label for="currency">Currency</label>
      <input id="currency" name="currency" type="text"
             value="{{ currency or 'USD' }}" required readonly />

      <button type="submit">Pay</button>
    </form>
  </div>
</body>
</html>
